<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ ç¥ç§˜ç¤¼ç‰©</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #e4edf9 100%);
      min-height: 100vh;
      font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
      overflow: hidden;
      position: relative;
      perspective: 1000px;
      transform-style: preserve-3d;
    }

    .popup {
      position: absolute;
      width: 220px;
      padding: 18px;
      text-align: center;
      font-size: 16px;
      line-height: 1.5;
      border-radius: 18px;
      z-index: 10;
      opacity: 0;
      transform: translateZ(-100px) rotateX(45deg) rotateY(15deg) scale(0.6);
      transform-style: preserve-3d;
      box-shadow:
        0 12px 30px rgba(0, 0, 0, 0.2),
        0 4px 8px rgba(0, 0, 0, 0.1);
      animation: pop3D 0.8s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards;
    }

    /* ç…§ç‰‡ä¸“ç”¨æ ·å¼ */
    .popup.photo-popup {
      width: 180px;
      height: 180px;
      padding: 6px;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .popup.photo-popup img {
      max-width: 100%;
      max-height: 100%;
      border-radius: 12px;
      object-fit: cover;
    }

    /* æ·¡å‡ºåŠ¨ç”» */
    @keyframes fadeOut {
      from { opacity: 1; transform: translateZ(0) scale(1); }
      to { opacity: 0; transform: translateZ(-50px) scale(0.9); }
    }

    .popup.fade-out {
      animation: fadeOut 1s ease forwards !important;
    }

    @keyframes pop3D {
      0% {
        opacity: 0;
        transform: translateZ(-100px) rotateX(45deg) rotateY(15deg) scale(0.6);
      }
      70% {
        transform: translateZ(20px) rotateX(-5deg) rotateY(-3deg) scale(1.05);
        opacity: 1;
      }
      100% {
        opacity: 1;
        transform: translateZ(0) rotateX(0) rotateY(0) scale(1);
      }
    }

    .popup.color1 { background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%); color: #5a3a3a; }
    .popup.color2 { background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%); color: #2b4a66; }
    .popup.color3 { background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%); color: #3a5a3a; }
    .popup.color4 { background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%); color: #5a3a6a; }
    .popup.color5 { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); color: #663a2b; }

    .popup:hover:not(.photo-popup) {
      transform: translateZ(30px) rotateX(-5deg) rotateY(5deg) !important;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      box-shadow:
        0 16px 40px rgba(0, 0, 0, 0.25),
        0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .heart {
      position: absolute;
      font-size: 20px;
      color: #ff6b9d;
      top: -30px;
      animation: fall linear forwards;
    }

    @keyframes fall {
      to {
        transform: translateY(calc(100vh + 50px));
        opacity: 0;
      }
    }

    .start-btn {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 14px 32px;
      background: #0078d4;
      color: white;
      border: none;
      border-radius: 30px;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 120, 212, 0.3);
      z-index: 20;
    }
    .start-btn:hover {
      background: #0066b3;
    }
  </style>
</head>
<body>

<button id="startBtn" class="start-btn">å§šå­¦å§ï¼2026å³å°†åˆ°æ¥ï¼Œè¯·æ¥æ”¶è¿™ä»½surpriseï¼</button>

<!-- èƒŒæ™¯éŸ³ä¹ï¼ˆå¾ªç¯æ’­æ”¾ï¼‰ -->
<audio id="bgMusic" src="background-music.mp3" preload="auto" loop></audio>

<script>
  const messages = [
    "æ„¿æ‰€æœ‰çš„çƒ¦æ¼éƒ½æ¶ˆå¤±",
    "çæƒœæ¯ä¸€åˆ»",
    "å¥½å¥½çˆ±è‡ªå·±",
    "æ¢¦æƒ³æˆçœŸ",
    "æ¯ä¸€å¤©éƒ½è¦è¿‡çš„å¼€å¿ƒå“¦ï¼",
    "2026ï¼Œè¦åšä¸ªå¿«ä¹åˆæœ‰é’±çš„å¤§äººå“¦~",
    "2025å„è¿é€€ï¼é€€ï¼é€€ï¼",
    "2025ä¸ç‰¹åˆ«ï¼Œç‰¹åˆ«çš„æ˜¯è®¤è¯†äº†ä½ ",
    "æ„¿æˆ‘ä»¬2026é‡ä½³äºº",
    "è“æ¡‰ä»¥é‡é‡Šæ€€é¸Ÿ",
    "ä¸–ç•Œä¸Šç¾å¥½çš„ä¸œè¥¿ä¸å¤ªå¤šï¼Œç«‹ç§‹å‚æ™šä»æ²³å¯¹å²¸å¹å‡ºæ¥çš„é£"
  ];

  // âœ… ä¼˜åŒ–åçš„17ä¸ªå¿ƒå½¢ç‚¹ï¼ˆæ‰©å¤§èŒƒå›´ï¼‰
  const heartPoints = [
    { x: 0, y: -180 },     // é¡¶éƒ¨å°–ç‚¹
    { x: 20, y: -130 },
    { x: 40, y: -90 },
    { x: 60, y: -50 },
    { x: 80, y: -20 },
    { x: 60, y: 20 },
    { x: 40, y: 50 },
    { x: 20, y: 90 },
    { x: 0, y: 130 },
    { x: -20, y: 90 },
    { x: -40, y: 50 },
    { x: -60, y: 20 },
    { x: -80, y: -20 },
    { x: -60, y: -50 },
    { x: -40, y: -90 },
    { x: -20, y: -130 }
  ];

  const photoPaths = Array.from({ length: 17 }, (_, i) => `images/${i + 1}.jpg`);

  let started = false;

  document.getElementById('startBtn').addEventListener('click', () => {
    if (started) return;
    started = true;
    document.getElementById('startBtn').style.display = 'none';

    const audio = document.getElementById('bgMusic');
    if (audio) {
      audio.volume = 0.45;
      const playPromise = audio.play();
      if (playPromise !== undefined) {
        playPromise.catch(e => console.log("éŸ³é¢‘æ’­æ”¾è¢«é˜»æ­¢:", e));
      }
    }

    const totalPhotos = photoPaths.length;
    const photoIntervalMs = 150;
    const photoDisplayDuration = 2500;

    const photoElements = [];

    const centerX = window.innerWidth / 2;
    const centerY = window.innerHeight / 2;

    // âœ… å…³é”®ï¼šå¢å¤§ scale åˆ° 3~5
    const scale = 4.0; // è°ƒæ•´æ­¤å€¼æ§åˆ¶çˆ±å¿ƒå¤§å°

    for (let i = 0; i < totalPhotos; i++) {
      setTimeout(() => {
        if (!started) return;

        const popup = document.createElement('div');
        popup.className = 'popup photo-popup';
        const img = document.createElement('img');
        img.src = photoPaths[i];
        img.alt = `ç…§ç‰‡ ${i + 1}`;
        popup.appendChild(img);

        // è·å–å¿ƒå½¢ç‚¹å¹¶æ”¾å¤§
        const point = heartPoints[i];
        const left = centerX + point.x * scale - 100;
        const top = centerY + point.y * scale - 100;

        // å®‰å…¨è¾¹ç•Œ
        const safeLeft = Math.max(10, Math.min(window.innerWidth - 210, left));
        const safeTop = Math.max(10, Math.min(window.innerHeight - 210, top));

        popup.style.left = `${safeLeft}px`;
        popup.style.top = `${safeTop}px`;

        document.body.appendChild(popup);
        photoElements.push(popup);
      }, i * photoIntervalMs);
    }

    // === æ·¡å‡ºå¹¶å¯åŠ¨ç¥ç¦è¯­ ===
    setTimeout(() => {
      photoElements.forEach(p => p.classList.add('fade-out'));
      setTimeout(() => {
        photoElements.forEach(p => p.remove());

        // å¯åŠ¨æ–‡å­—å¼¹çª—
        const totalPopups = 150;
        const intervalMs = 80;
        const colors = ['color1', 'color2', 'color3', 'color4', 'color5'];
        for (let i = 0; i < totalPopups; i++) {
          setTimeout(() => {
            if (!started) return;
            const popup = document.createElement('div');
            popup.className = 'popup';
            popup.classList.add(colors[Math.floor(Math.random() * colors.length)]);
            popup.innerText = messages[Math.floor(Math.random() * messages.length)];
            const x = Math.random() * (window.innerWidth - 240);
            const y = Math.random() * (window.innerHeight - 120);
            popup.style.left = `${x}px`;
            popup.style.top = `${y}px`;
            document.body.appendChild(popup);
          }, i * intervalMs);
        }

        // é£˜å¿ƒ
        setInterval(() => {
          if (!started || document.querySelectorAll('.heart').length > 12) return;
          const heart = document.createElement('div');
          heart.className = 'heart';
          heart.textContent = 'â¤ï¸';
          heart.style.left = Math.random() * window.innerWidth + 'px';
          heart.style.animationDuration = (Math.random() * 2 + 2) + 's';
          document.body.appendChild(heart);
          setTimeout(() => heart.remove(), 5000);
        }, 700);
      }, 1000);
    }, photoDisplayDuration + totalPhotos * photoIntervalMs);
  });
</script>

</body>
</html>


